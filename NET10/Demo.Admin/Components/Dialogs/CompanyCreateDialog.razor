@using Demo.Admin.Models
@using Demo.Admin.Services
@using System.ComponentModel.DataAnnotations

<MudDialog>
    <DialogContent>
        <MudForm @ref="_form" @bind-IsValid="@_isFormValid" Model="@_model" Validation="@_validator.ValidateValue">
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField @bind-Value="_model.Name"
                                  For="@(() => _model.Name)"
                                  Label="회사명"
                                  Variant="Variant.Outlined"
                                  Required="true"
                                  RequiredError="회사명은 필수입니다"
                                  Counter="255"
                                  MaxLength="255"
                                  Immediate="true" />
                </MudItem>
            </MudGrid>
        </MudForm>
    </DialogContent>

    <DialogActions>
        <MudButton OnClick="Cancel" Color="Color.Default">취소</MudButton>
        <MudButton OnClick="CreateCompany"
                   Color="Color.Primary"
                   Variant="Variant.Filled"
                   Disabled="@(!_isFormValid || _isCreating)"
                   StartIcon="@(_isCreating ? null : Icons.Material.Filled.Business)">
            @if (_isCreating)
            {
                <MudProgressCircular Size="Size.Small" Indeterminate="true" />
                <MudText Class="ms-2">생성 중...</MudText>
            }
            else
            {
                <MudText>생성</MudText>
            }
        </MudButton>
    </DialogActions>
</MudDialog>